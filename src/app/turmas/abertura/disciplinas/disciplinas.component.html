<div class="disciplinas-container">
  <po-multiselect
    p-label="Selecione as disciplinas abaixo:"
    [p-options]="disciplinasOptions"
    [(ngModel)]="disciplinas"
  >
  </po-multiselect>

  <po-modal #novaDisciplina p-title="Criar nova disciplina" p-size="sm">
    <form #form="ngForm" [formGroup]="disciplinaForm" class="form-group" (submit)="criarDisciplina()">
      <div class="form-field">
        <label>Sigla</label>
        <input
          type="text"
          placeholder="AGT"
          name="sigla"
          [(ngModel)]="disciplina.sigla"
          formControlName="sigla"
        >

        <app-validation-message
          *ngIf="disciplinaForm.get('sigla').errors?.required && form.submitted"
          textContent="Campo obrigatório"
        >
        </app-validation-message>

        <app-validation-message
          *ngIf="disciplinaForm.get('sigla').errors?.maxlength && form.submitted"
          textContent="Limite máximo de 4 caracteres"
        >
        </app-validation-message>
      </div>

      <div class="form-field">
        <label>Descrição</label>
        <input
          type="text"
          placeholder="Algoritmos"
          name="descricao"
          [(ngModel)]="disciplina.descricao"
          formControlName="descricao"
        >

        <app-validation-message
          *ngIf="disciplinaForm.get('descricao').errors?.required && form.submitted"
          textContent="Campo obrigatório"
        >
        </app-validation-message>
      </div>

      <div class="form-field">
        <label>Carga Horária</label>
        <input
          type="number"
          placeholder="Ex: 16 (horas)"
          name="cargaHoraria"
          [(ngModel)]="disciplina.cargaHoraria"
          formControlName="cargaHoraria"
        >

        <app-validation-message
          *ngIf="disciplinaForm.get('cargaHoraria').errors?.required && form.submitted"
          textContent="Campo obrigatório"
        >
        </app-validation-message>
      </div>

      <div class="form-field">
        <label>Professor</label>
        <po-select
          name="professor"
          [(ngModel)]="disciplina.professor"
          [p-options]="professoresOptions"
          formControlName="professor"
        >
        </po-select>

        <app-validation-message
          *ngIf="disciplinaForm.get('professor').errors?.required && form.submitted"
          textContent="Campo obrigatório"
        >
        </app-validation-message>
      </div>

      <po-button
        p-type="link"
        p-label="Incluir novo professor"
        (p-click)="novoProfessor.open()"
      >
      </po-button>

      <po-modal #novoProfessor p-size="md" p-title="Novo Professor">
        <form #profForm="ngForm" [formGroup]="professorForm" class="form-group" (submit)="criarProfessor()">
          <div class="form-field">
            <label>Nome</label>
            <input
              type="text"
              placeholder="Messias"
              name="nome"
              [(ngModel)]="professor.nome"
              formControlName="nome"
            >

            <app-validation-message
              *ngIf="professorForm.get('nome').errors?.required && profForm.submitted"
              textContent="Campo obrigatório"
            >
            </app-validation-message>

            <app-validation-message
              *ngIf="professorForm.get('nome').errors?.maxlength && profForm.submitted"
              textContent="Limite máximo de 40 caracteres"
            >
            </app-validation-message>
          </div>

          <div class="form-field">
            <label>E-mail</label>
            <input
              type="text"
              placeholder="messias@jacó.com"
              name="email"
              [(ngModel)]="professor.email"
              formControlName="email"
            >

            <app-validation-message
              *ngIf="professorForm.get('email').errors?.required && profForm.submitted"
              textContent="Campo obrigatório"
            >
            </app-validation-message>

            <app-validation-message
              *ngIf="professorForm.get('email').errors?.email && profForm.submitted"
              textContent="Email inválido"
            >
            </app-validation-message>
          </div>

          <div class="form-field">
            <label>CPF</label>
            <input
              type="number"
              placeholder="777.777.777-77"
              name="cpf"
              [(ngModel)]="professor.cpf"
              formControlName="cpf"
            >

            <app-validation-message
              *ngIf="professorForm.get('cpf').errors?.required && profForm.submitted"
              textContent="Campo obrigatório"
            >
            </app-validation-message>

            <app-validation-message
              *ngIf="professorForm.get('cpf').errors?.pattern && profForm.submitted"
              textContent="Ex: 123.456.789-00"
            >
            </app-validation-message>
          </div>

          <div class="form-field">
            <label>Titulação</label>
            <po-select
              [(ngModel)]="professor.titulacao"
              [ngModelOptions]="{standalone: true}"
              [p-options]="titulacaoProfessorOptions"
            >
            </po-select>
          </div>

          <button class="btn-create">Adicionar professor</button>
        </form>
      </po-modal>

      <button class="btn-create">Adicionar disciplina</button>
    </form>
  </po-modal>

  <po-button
    p-type="link"
    p-label="Criar nova disciplina"
    (p-click)="novaDisciplina.open()"
  >
  </po-button>

  <po-button
    p-label="Próximo"
    p-type="primary"
    class="btn-next"
    (p-click)="next()"
  >
  </po-button>
</div>
